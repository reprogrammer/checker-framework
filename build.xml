<!--
  This is a configuration file for use by Ant when building the 
  Checker Framework.
  This top-level build file simply delegates to the subprojects.
-->
<project name="checkerframework" default="dist" basedir=".">

    <property file="build-common.properties"/>

    <property name="subproject-locs"
              value="${javacutil.loc},${dataflow.loc},${stubparser.loc},${framework.loc},${checker.loc}"/>

    <taskdef resource="net/sf/antcontrib/antcontrib.properties">
        <classpath>
            <pathelement location="${antcontrib.lib}"/>
        </classpath>
    </taskdef>

    <target name="build"
            description="Compile all subprojects">
        <for list="${subproject-locs}" param="project">
            <sequential>
                <ant dir="@{project}">
                    <target name="build"/>
                </ant>
            </sequential>
        </for>
    </target>

    <target name="clean"
            description="Clean all subprojects">
        <for list="${subproject-locs}" param="project">
            <sequential>
                <ant dir="@{project}">
                    <target name="clean"/>
                </ant>
            </sequential>
        </for>
    </target>

    <target name="dist"
            description="Compile and prepare for release in all subprojects">
        <for list="${subproject-locs}" param="project">
            <sequential>
                <ant dir="@{project}">
                    <target name="dist"/>
                </ant>
            </sequential>
        </for>
    </target>

    <target name="javadoc"
            description="Generate javadoc for all subprojects">
        <for list="${subproject-locs}" param="project">
            <sequential>
                <ant dir="@{project}">
                    <target name="javadoc"/>
                </ant>
            </sequential>
        </for>
    </target>

</project>
